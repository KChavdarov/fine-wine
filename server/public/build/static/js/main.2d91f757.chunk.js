(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,r){},106:function(e,t,r){},107:function(e,t,r){},108:function(e,t,r){},109:function(e,t,r){},110:function(e,t,r){},111:function(e,t,r){},112:function(e,t,r){},113:function(e,t,r){},212:function(e,t,r){},213:function(e,t,r){},214:function(e,t,r){},215:function(e,t,r){},216:function(e,t,r){},217:function(e,t,r){},218:function(e,t,r){},219:function(e,t,r){},220:function(e,t,r){},221:function(e,t,r){},222:function(e,t,r){},223:function(e,t,r){},224:function(e,t,r){},225:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),c=r(28),s=r.n(c),i=(r(93),r(94),r(95),r(14)),l=r(4),o=r(41),u=r(3),j=r.n(u),d=r(6),b=r(15),m=r(5),p=r(7),h=(r(97),"https://fine-wine-app.herokuapp.com/api");function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,r);case 3:if(!1!==(a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:throw e.sent;case 9:return e.prev=9,e.next=12,a.json();case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t0=e.catch(9),e.abrupt("return",null);case 18:e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(0),e.t1;case 23:case"end":return e.stop()}}),e,null,[[0,20],[9,15]])})))).apply(this,arguments)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1?arguments[1]:void 0,r={method:e,credentials:"include",headers:{}};return t&&(t instanceof FormData?r.body=t:(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(t))),r}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,f());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,f("POST",r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,f("PUT",r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,f("PATCH",r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,f("DELETE"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=h+"/wine";function _(){return q.apply(this,arguments)}function q(){return(q=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(E+"/categories");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(E+"/"+t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(E+"?"+t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(E+"/latest?"+t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(E,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(E+"/"+t,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(E+"/"+t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r(98);var G=r(12),H=r(11),J=h+"/user";function z(){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(J);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return X.apply(this,arguments)}function X(){return(X=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(J+"/register",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(J+"/login",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(J+"/logout");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(J,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return ce.apply(this,arguments)}function ce(){return(ce=Object(d.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(J+"/".concat(t,"/favorites/"),{wineId:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(d.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(J+"/".concat(t,"/favorites/").concat(r));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(J+"/".concat(t,"/favorites/"));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=r(18),je={_id:"",_createdAt:"",_updatedAt:"",_isAdmin:!1,firstName:"",lastName:"",email:"",phone:"",address:"",orders:[],favorites:[],cart:[]},de={isLoading:!1,status:"idle",user:je,errors:[]},be=Object(ue.b)("user/verify",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,z();case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),me=Object(ue.b)("user/login",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,Z(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),pe=Object(ue.b)("user/register",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,K(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),he=Object(ue.b)("user/logout",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,ee();case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Oe=Object(ue.b)("user/addFavorite",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.userId,n=t.wineId,c=r.rejectWithValue,e.prev=2,e.next=5,ne(a,n);case 5:return s=e.sent,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),xe=Object(ue.b)("user/removeFavorite",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.userId,n=t.wineId,c=r.rejectWithValue,e.prev=2,e.next=5,se(a,n);case 5:return s=e.sent,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),fe=Object(ue.b)("user/update",function(){var e=Object(d.a)(j.a.mark((function e(t,r){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,re(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),ve=Object(ue.c)({name:"user",initialState:de,reducers:{},extraReducers:function(e){e.addCase(be.pending,(function(e){e.status="loading",e.errors=[]})).addCase(be.fulfilled,(function(e,t){e.status="succeeded",t.payload&&(e.user=t.payload,e.errors=[])})).addCase(be.rejected,(function(e,t){e.status="failed",e.errors=t.payload})),e.addCase(me.pending,(function(e){e.status="loading",e.errors=[]})).addCase(me.fulfilled,(function(e,t){e.status="succeeded",t.payload&&(e.user=t.payload,e.errors=[])})).addCase(me.rejected,(function(e,t){e.status="failed",e.errors=t.payload})),e.addCase(pe.pending,(function(e){e.status="loading",e.errors=[]})).addCase(pe.fulfilled,(function(e,t){e.status="succeeded",t.payload&&(e.user=t.payload,e.errors=[])})).addCase(pe.rejected,(function(e,t){e.status="failed",e.errors=t.payload})),e.addCase(he.pending,(function(e){e.status="loading",e.errors=[]})).addCase(he.fulfilled,(function(e,t){e.status="succeeded",e.user=je,e.errors=[]})).addCase(he.rejected,(function(e,t){e.status="failed",e.errors=t.payload})),e.addCase(Oe.pending,(function(e){e.status="loading",e.errors=[]})).addCase(Oe.fulfilled,(function(e,t){e.status="succeeded",t.payload&&(e.user=t.payload,e.errors=[])})).addCase(Oe.rejected,(function(e,t){e.status="failed",e.errors=t.payload})),e.addCase(xe.pending,(function(e){e.status="loading",e.errors=[]})).addCase(xe.fulfilled,(function(e,t){e.status="succeeded",t.payload&&(e.user=t.payload,e.errors=[])})).addCase(xe.rejected,(function(e,t){e.status="failed",e.errors=t.payload})),e.addCase(fe.pending,(function(e){e.status="loading",e.errors=[]})).addCase(fe.fulfilled,(function(e,t){e.status="succeeded",t.payload&&(e.user=t.payload,e.errors=[])})).addCase(fe.rejected,(function(e,t){e.status="failed",e.errors=t.payload}))}}).reducer,ge=function(e){return e.user},Ne={},ye=Object(ue.c)({name:"cart",initialState:Ne,reducers:{set:function(e,t){return t.payload||Ne},add:function(e,t){var r=t.payload;e[r]=(e[r]||0)+1},subtract:function(e,t){var r=t.payload;e[r]=Math.max(1,e[r]-1)},remove:function(e,t){delete e[t.payload]},reset:function(e){return Ne}}}),we=function(e){return e.cart},Pe=ye.actions,ke=Pe.set,Ce=Pe.add,Se=Pe.subtract,Fe=Pe.remove,Ee=Pe.reset,_e=ye.reducer,qe=function(e){return function(t,r){try{t(Ce(e)),localStorage.setItem("cart",JSON.stringify(r().cart))}catch(a){console.error(a)}}},Ie=r(1);function Re(e){var t=e.product,r=Object(l.h)(),a=Object(H.b)(),n=Object(H.c)(ge).user;function c(e){e.stopPropagation(),(null===n||void 0===n?void 0:n.favorites.includes(null===t||void 0===t?void 0:t._id))?a(xe({userId:n._id,wineId:t._id})):a(Oe({userId:n._id,wineId:t._id}))}var s=n.favorites.includes(null===t||void 0===t?void 0:t._id)?Object(Ie.jsx)(G.m,{onClick:c}):Object(Ie.jsx)(G.l,{onClick:c});return Object(Ie.jsxs)("article",{className:"product-card",children:[Object(Ie.jsxs)("div",{className:"card-main",onClick:function(){r("/details/".concat(t._id))},children:[Object(Ie.jsxs)("header",{className:"card-header",children:[Object(Ie.jsx)("div",{className:"spacer"}),Object(Ie.jsx)("p",{className:"brand",children:t.brand}),n._id&&!n._isAdmin&&Object(Ie.jsx)("div",{className:"favorite-icon-container",children:s})]}),Object(Ie.jsx)("div",{className:"image-container",children:Object(Ie.jsx)("img",{src:t.image,alt:"product"})}),Object(Ie.jsxs)("div",{className:"product-details",children:[Object(Ie.jsx)("p",{className:"name",children:t.name}),Object(Ie.jsx)("p",{className:"grapes",children:t.grape.join(" ,")}),Object(Ie.jsxs)("div",{className:"geo",children:[Object(Ie.jsx)("span",{className:"year",children:t.year})," | ",Object(Ie.jsx)("span",{className:"country",children:t.country})]})]}),Object(Ie.jsx)("div",{className:"prices",children:t.isPromo?Object(Ie.jsxs)("p",{className:"price",children:[Object(Ie.jsx)("span",{className:"old-price",children:t.basePrice.toLocaleString("en-GB",{style:"currency",currency:"EUR"})}),Object(Ie.jsx)("span",{className:"current-price",children:t.currentPrice.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]}):Object(Ie.jsx)("p",{children:Object(Ie.jsx)("span",{className:"base-price",children:t.currentPrice.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})})}),t.isPromo&&Object(Ie.jsx)("span",{className:"sale-logo",children:"great deal!"})]}),n._isAdmin?null:Object(Ie.jsx)("div",{className:"buttons",children:Object(Ie.jsx)("button",{className:"action-button",onClick:function(){a(qe(t._id)),i.b.success("Wine added to cart")},children:"Add to cart"})})]})}r(105),r(56);function Ye(e){var t=e.category,r=e.fields,n=e.checkboxHandler,c=Object(a.useState)(!1),s=Object(p.a)(c,2),i=s[0],l=s[1];return Object(a.useEffect)((function(){var e=Object.values(r).some((function(e){return e}));l(e)}),[r]),Object(a.useEffect)((function(){l((function(){return Object.values(r).some((function(e){return e}))}))}),[r]),Object(Ie.jsxs)("div",{className:"filter-group",children:[Object(Ie.jsxs)("div",{className:"filter-group-header",onClick:function(){l((function(e){return!e}))},children:[Object(Ie.jsx)("h5",{className:"filter-group-heading",children:t}),i?Object(Ie.jsx)(G.f,{}):Object(Ie.jsx)(G.c,{})]}),Object(Ie.jsx)("div",{className:i?"filter-group-content active":"filter-group-content",children:Object.entries(r).map((function(e){var r=Object(p.a)(e,2),a=r[0],c=r[1];return Object(Ie.jsx)("div",{className:"check-group",children:Object(Ie.jsxs)("label",{htmlFor:a,children:[a,Object(Ie.jsx)("input",{type:"checkbox",id:a,name:a,value:a,checked:c,onChange:function(e){return n(e,t)}}),Object(Ie.jsx)("span",{className:"checkMark"})]})},a)}))})]})}function Le(e){var t=e.filters,r=e.name,n=e.min,c=e.max,s=e.range,i=e.rangeHandler,l=Object(a.useState)(!1),o=Object(p.a)(l,2),u=o[0],j=o[1],d=s.min,b=s.max,m=(n-d)/(b-d)*100*.98+"%",h=(b-c)/(b-d)*100*.98+"%";return Object(a.useEffect)((function(){j((function(){return n!==d||c!==b}))}),[c,b,n,d,t]),Object(Ie.jsxs)("div",{className:"filter-group range-group",children:[Object(Ie.jsxs)("div",{className:"filter-group-header",onClick:function(){j((function(e){return!e}))},children:[Object(Ie.jsx)("h5",{className:"filter-group-heading",children:r}),u?Object(Ie.jsx)(G.f,{}):Object(Ie.jsx)(G.c,{})]}),Object(Ie.jsxs)("div",{className:u?"filter-group-content active":"filter-group-content",children:[Object(Ie.jsx)("div",{className:"selection",children:Object(Ie.jsxs)("div",{children:["Between: ",Object(Ie.jsx)("span",{className:r,children:n})," - ",Object(Ie.jsx)("span",{className:r,children:c})]})}),Object(Ie.jsxs)("div",{className:"slider-container",children:[Object(Ie.jsx)("input",{type:"range",id:"input-left",name:"min".concat(r),min:d,max:b,value:n,onChange:i}),Object(Ie.jsx)("input",{type:"range",id:"input-right",name:"max".concat(r),min:d,max:b,value:c,onChange:i}),Object(Ie.jsxs)("div",{className:"slider",children:[Object(Ie.jsx)("div",{className:"track"}),Object(Ie.jsx)("div",{className:"range",style:{left:m,right:h}}),Object(Ie.jsx)("div",{className:"thumb left",style:{left:m}}),Object(Ie.jsx)("div",{className:"thumb right",style:{right:h}})]})]})]})]})}var Ae=["minYear","maxYear","yearRange","minPrice","maxPrice","priceRange","page","perPage","sort"];function De(e){var t=e.filters,r=e.handlers,n=Object(a.useState)(!1),c=Object(p.a)(n,2),s=c[0],i=c[1];function l(e){return function(t){i(!1),e(t)}}var o=Object.entries(t).filter((function(e){var t=Object(p.a)(e,1)[0];return!Ae.includes(t)})).map((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];return Object(Ie.jsx)(Ye,{category:a,fields:n,checkboxHandler:r.checkboxHandler},a)}));return Object(Ie.jsxs)("section",{className:"filters",children:[Object(Ie.jsxs)("div",{className:"section-header",onClick:function(){i((function(e){return!e}))},children:[Object(Ie.jsx)("h4",{className:"heading",children:"Filters"}),s?Object(Ie.jsx)(G.f,{}):Object(Ie.jsx)(G.c,{})]}),Object(Ie.jsxs)("form",{className:s?"filter-form active":"filter-form",onSubmit:l(r.filtersSubmitHandler),children:[Object(Ie.jsxs)("div",{className:"filters-groups-container",children:[Object(Ie.jsx)(Le,{rangeHandler:r.rangeHandler,min:t.minPrice,max:t.maxPrice,range:t.priceRange,name:"Price",filters:t}),Object(Ie.jsx)(Le,{rangeHandler:r.rangeHandler,min:t.minYear,max:t.maxYear,range:t.yearRange,name:"Year",filters:t}),o]}),Object(Ie.jsxs)("div",{className:"buttons",children:[Object(Ie.jsx)("button",{className:"button reset",onClick:l(r.filtersResetHandler),type:"button",children:"Reset"}),Object(Ie.jsx)("input",{className:"button submit",type:"submit",value:"Apply"})]})]})]})}var Te=r(10);r(106);function Ue(e){var t=e.handler,r=e.products;return r.count?Object(Ie.jsxs)("div",{className:"paginator",children:[Object(Ie.jsxs)("div",{className:"selector-group per-page",children:[Object(Ie.jsx)("label",{htmlFor:"perPage",children:"Items per page"}),Object(Ie.jsxs)("select",{name:"perPage",id:"perPage",onChange:t,value:r.perPage,children:[Object(Ie.jsx)("option",{value:"12",children:"12"}),Object(Ie.jsx)("option",{value:"24",children:"24"}),Object(Ie.jsx)("option",{value:"36",children:"36"})]})]}),Object(Ie.jsxs)("div",{className:"selector-group sort",children:[Object(Ie.jsx)("label",{htmlFor:"sort",children:"Sorting"}),Object(Ie.jsxs)("select",{name:"sort",id:"sort",onChange:t,value:r.sort,children:[Object(Ie.jsx)("option",{value:"-_isPromo",children:"Best Deals"}),Object(Ie.jsx)("option",{value:"-_createdAt",children:"Latest Products"}),Object(Ie.jsx)("option",{value:"-currentPrice",children:"Price Descending"}),Object(Ie.jsx)("option",{value:"currentPrice",children:"Price Ascending"})]})]}),Object(Ie.jsxs)("div",{className:"selector-group page",children:[Object(Ie.jsxs)("div",{className:"label",children:["Page:",r.page," of ",Math.ceil(r.count/r.perPage)]}),Object(Ie.jsxs)("div",{className:"buttons",onClick:t,children:[Object(Ie.jsx)("button",{className:"select-page-button",id:"previousPage",children:Object(Ie.jsx)(G.d,{})}),Object(Ie.jsx)("button",{className:"select-page-button",id:"nextPage",children:Object(Ie.jsx)(G.e,{})})]})]})]}):null}function Ve(){return Object(Ie.jsx)("p",{children:"Loading..."})}var Me={type:{},brand:{},grape:{},country:{},region:{},volume:{},priceRange:{min:0,max:1e3},minPrice:0,maxPrice:1e3,yearRange:{min:1900,max:3e3},minYear:1900,maxYear:3e3},We={page:1,perPage:12,count:0,sort:"-isPromo"};function Be(){var e=Object(a.useState)(Me),t=Object(p.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(Object(m.a)({wines:[]},We)),s=Object(p.a)(c,2),i=s[0],u=s[1],h=Object(Te.d)(),O=Object(p.a)(h,2),x=O[0],f=O[1],v=Object(a.useState)(!0),g=Object(p.a)(v,2),N=g[0],y=g[1],w=Object(l.h)(),P=Object(a.useCallback)((function(e){return Object(b.a)(e.keys()).reduce((function(t,r){return t[r]=e.getAll(r),t}),{})}),[]),k=Object(a.useCallback)(function(){var e=Object(d.a)(j.a.mark((function e(t){var r,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:r=e.sent,a=P(t),c=["minYear","maxYear","yearRange","minPrice","maxPrice","priceRange","isPromo"],(s=Object.entries(r).filter((function(e){var t=Object(p.a)(e,1)[0];return!c.includes(t)})).reduce((function(e,t){var r=Object(p.a)(t,2),n=r[0],c=r[1];return e[n]=c.reduce((function(e,t){var r;return e[t]=Boolean(null===(r=a[n])||void 0===r?void 0:r.includes(t.toString())),e}),{}),e}),{})).minPrice=a.minPrice&&Number(a.minPrice[0])||r.minPrice,s.maxPrice=a.maxPrice&&Number(a.maxPrice[0])||r.maxPrice,s.priceRange={min:r.minPrice,max:r.maxPrice},s.minYear=a.minYear&&Number(a.minYear[0])||r.minYear,s.maxYear=a.maxYear&&Number(a.maxYear[0])||r.maxYear,s.yearRange={min:r.minYear,max:r.maxYear},Me=s,n((function(e){return Object(m.a)(Object(m.a)({},e),s)}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P]),C=Object(a.useCallback)(function(){var e=Object(d.a)(j.a.mark((function e(t){var r,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.has("page")&&Number(t.get("page")),e.next=3,Y(t);case 3:a=e.sent,n=Math.ceil(a.count/a.perPage),a.count&&r>n&&(t.set("page",Math.min(r,n)),f(t,{replace:!0})),u((function(){return a})),y(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f]),S=Object(a.useCallback)((function(e,t){var r=e.target.name,a=e.target.checked,c=Object(o.a)({},r,a);n((function(e){var r=e[t],a=Object(m.a)(Object(m.a)({},r),c),n=Object(m.a)({},e);return n[t]=a,n}))}),[]),F=Object(a.useCallback)((function(e){var t=e.target.name;n((function(r){var a={minPrice:r.minPrice,maxPrice:r.maxPrice,minYear:r.minYear,maxYear:r.maxYear},n=Number(e.target.value);return"minPrice"===t?a.minPrice=Math.min(a.maxPrice-10,n):"maxPrice"===t?a.maxPrice=Math.max(a.minPrice+10,n):"minYear"===t?a.minYear=Math.min(a.maxYear-1,n):"maxYear"===t&&(a.maxYear=Math.max(a.minYear+1,n)),Object(m.a)(Object(m.a)({},r),a)}))}),[]),E=Object(a.useCallback)((function(){f();try{k(x)}catch(e){w("/error")}}),[k,w,x,f]),q=Object(a.useCallback)((function(){var e=["minYear","maxYear","yearRange","minPrice","maxPrice","priceRange","isPromo"],t=Object.entries(r).filter((function(t){var r=Object(p.a)(t,1)[0];return!e.includes(r)})).reduce((function(e,t){var r=Object(p.a)(t,2),a=r[0],n=r[1],c=Object.keys(n).filter((function(e){return n[e]}));return Object.keys(c).length>0&&(e[a]=c),e}),{});(x.has("minPrice")&&x.get("minPrice")!==r.minPrice||r.minPrice!==Me.minPrice)&&(t.minPrice=r.minPrice),(x.has("maxPrice")&&x.get("maxPrice")!==r.maxPrice||r.maxPrice!==Me.maxPrice)&&(t.maxPrice=r.maxPrice),(x.has("minYear")&&x.get("minYear")!==r.minYear||r.minYear!==Me.minYear)&&(t.minYear=r.minYear),(x.has("maxYear")&&x.get("maxYear")!==r.maxYear||r.maxYear!==Me.maxYear)&&(t.maxYear=r.maxYear),f(t)}),[r,x,f]),I=Object(a.useCallback)((function(e){e.preventDefault(),q()}),[q]),R=Object(a.useCallback)((function(e){var t=i.page,r=i.perPage,a=i.sort;"previousPage"===e.target.id?t=Math.max(i.page-1,1):"nextPage"===e.target.id?t=Math.min(i.page+1,Math.ceil(i.count/i.perPage)):"perPage"===e.target.id?r=Number(e.target.value):"sort"===e.target.id&&(a=e.target.value),t!==i.page&&(x.set("page",t),f(P(x))),r!==i.perPage&&(x.set("page",1),x.set("perPage",r),f(P(x))),a!==i.sort&&(x.set("page",1),x.set("sort",a),f(P(x)))}),[P,i.count,i.page,i.perPage,i.sort,x,f]);Object(a.useEffect)((function(){try{k(x),C(x)}catch(e){w("/error")}}),[k,C,w,x]);var L=i.count?i.wines.map((function(e){return Object(Ie.jsx)(Re,{product:e},e._id)})):Object(Ie.jsxs)("div",{className:"no-results",children:[Object(Ie.jsx)("p",{children:"No wines meet the specified criteria."})," ",Object(Ie.jsx)("p",{children:"Please refine your filters."})]});return Object(Ie.jsxs)("section",{className:"page catalogue container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Wine Catalogue"}),N?null:Object(Ie.jsx)(De,{filters:r,handlers:{checkboxHandler:S,rangeHandler:F,filtersSubmitHandler:I,filtersResetHandler:E}}),N?null:Object(Ie.jsx)(Ue,{handler:R,products:i}),Object(Ie.jsx)("div",{className:"products-container",children:N?Object(Ie.jsx)(Ve,{}):L})]})}r(107);var Ge=[{title:"Catalogue",url:"/catalogue",type:"public",mobileOnly:!1},{title:"Favorites",url:"/user/favorites",type:"public",mobileOnly:!0},{title:"Profile",url:"/user/profile",type:"user",mobileOnly:!0},{title:"Contacts",url:"/contacts",type:"user",mobileOnly:!1},{title:"About us",url:"/about",type:"user",mobileOnly:!1},{title:"Login",url:"/auth/login",type:"guest",mobileOnly:!1},{title:"Register",url:"/auth/register",type:"guest",mobileOnly:!1},{title:"Dashboard",url:"/admin/dashboard",type:"admin",mobileOnly:!0},{title:"Catalogue",url:"/catalogue",type:"admin",mobileOnly:!1},{title:"Create",url:"/admin/create",type:"admin",mobileOnly:!1},{title:"Profile",url:"/user/profile",type:"admin",mobileOnly:!0}],He=r(27),Je=r(81);function ze(e){var t=e.mainRef,r=Object(a.useState)(!1),n=Object(p.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(p.a)(i,2),o=l[0],u=l[1],j=Object(H.c)(ge).user,d=Object(H.c)(we),b=Object.values(d).reduce((function(e,t){return e+t}),0);Object(a.useEffect)((function(){var e=t.current,r=new IntersectionObserver((function(e){var t=Object(p.a)(e,1)[0];u(!t.isIntersecting)}),{root:null,threshold:0,rootMargin:"0px 0px -98% 0px"});return r.observe(e),function(){r.unobserve(e)}}),[t]);var m=[];function h(){s(!1)}return m=j._id&&j._isAdmin?Ge.filter((function(e){return"admin"===e.type})):j._id?Ge.filter((function(e){return"public"===e.type||"user"===e.type})):Ge.filter((function(e){return"public"===e.type||"guest"===e.type})),Object(Ie.jsx)("header",{className:o?"site-header":"site-header scrolled",children:Object(Ie.jsxs)("div",{className:"container",children:[Object(Ie.jsxs)("nav",{className:"site-navigation",children:[Object(Ie.jsx)("div",{className:"nav-button menu-icon",children:Object(Ie.jsx)("button",{onClick:function(){s((function(e){return!e}))},children:c?Object(Ie.jsx)(He.e,{}):Object(Ie.jsx)(He.b,{})})}),Object(Ie.jsx)("ul",{className:"navigation-items",onClick:h,children:m.filter((function(e){return!e.mobileOnly})).map((function(e){return Object(Ie.jsx)("li",{className:"nav-link",children:Object(Ie.jsx)(Te.c,{className:function(e){return e.isActive?"nav-active":""},to:e.url,children:e.title})},e.title)}))}),Object(Ie.jsx)("div",{className:"site-logo",onClick:h,children:Object(Ie.jsxs)(Te.b,{to:"/",children:["Fine ",Object(Ie.jsx)(Je.a,{})," wine"]})}),Object(Ie.jsx)("div",{className:"nav-button",onClick:h,children:j._isAdmin?Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("div",{className:"user-links",children:Object(Ie.jsx)(Te.b,{className:"nav-icon-link",to:"/user/profile",children:Object(Ie.jsx)(He.c,{})})}),Object(Ie.jsx)(Te.b,{className:"nav-icon-link",to:"/admin/dashboard",children:Object(Ie.jsx)(G.k,{})})]}):Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)("div",{className:"user-links",children:[Object(Ie.jsxs)(Te.b,{className:"nav-icon-link",to:"/user/favorites",children:[Object(Ie.jsx)(He.d,{}),Object(Ie.jsx)(Qe,{children:j.favorites.length})]}),Object(Ie.jsx)(Te.b,{className:"nav-icon-link",to:"/user/profile",children:Object(Ie.jsx)(He.c,{})})]}),Object(Ie.jsxs)(Te.b,{className:"nav-icon-link",to:"/cart",children:[Object(Ie.jsx)(He.a,{}),Object(Ie.jsx)(Qe,{children:b})]})]})})]}),Object(Ie.jsx)("div",{className:c?"mobile-menu active":"mobile-menu",onClick:h,children:Object(Ie.jsx)("ul",{className:"mobile-menu-items",children:m.map((function(e){return Object(Ie.jsx)("li",{className:"menu-link",children:Object(Ie.jsx)(Te.b,{to:e.url,children:e.title})},e.title)}))})})]})})}function Qe(e){var t=e.children;return t?Object(Ie.jsx)("div",{className:"icon-badge",children:Object(Ie.jsx)("span",{className:"icon-badge-content",children:t})}):null}var Ke=[{image:"grapes.webp",title:"Get a taste of our exquisite ruby red wines selection",text:"Explore catalogue",link:"/catalogue?type=red"},{image:"gold-grapes.webp",title:"Dive into an endless ocean of gold sensations",text:"Explore catalogue",link:"/catalogue?type=white"},{image:"rose.webp",title:"Enjoy countless moments with our premium rose offering",text:"Explore catalogue",link:"/catalogue?type=rose"},{image:"corks2.webp",title:"Make your celebrations truly special with our sparkling wines",text:"Explore catalogue",link:"/catalogue?type=sparkling"},{image:"four-glasses.webp",title:"Find the best companion for your sweet desserts",text:"Explore catalogue",link:"/catalogue?type=dessert"}];r(108),r(109);function Xe(e){var t=e.data;return Object(Ie.jsxs)("div",{className:"slide-container",style:{backgroundImage:"url('/images/".concat(t.image,"')")},children:[Object(Ie.jsx)("h1",{className:"slide-title",children:t.title}),Object(Ie.jsx)(Te.b,{className:"slide-button",to:t.link,children:t.text})]})}function Ze(){var e=Object(a.useState)(0),t=Object(p.a)(e,2),r=t[0],n=t[1];function c(){n((function(e){return e+1===Ke.length?0:e+1}))}Object(a.useEffect)((function(){var e=setInterval((function(){c()}),7e3);return function(){return clearInterval(e)}}),[r]);var s=Ke.map((function(e,t){return Object(Ie.jsx)("div",{className:t===r?"slide active":"slide",children:t===r&&Object(Ie.jsx)(Xe,{data:e})},e.image)}));return Object(Ie.jsxs)("div",{className:"carousel",children:[Object(Ie.jsx)(G.a,{className:"arrow left-arrow",onClick:function(){n((function(e){return e-1<0?Ke.length-1:e-1}))}}),s,Object(Ie.jsx)(G.b,{className:"arrow right-arrow",onClick:c})]})}r(110);function $e(e){var t=e.query,r=void 0===t?{}:t,n=e.title,c=void 0===n?"":n,s=Object(a.useState)([]),i=Object(p.a)(s,2),l=i[0],o=i[1],u=Object(a.useState)(!0),b=Object(p.a)(u,2),m=b[0],h=b[1],O=Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&");Object(a.useEffect)((function(){try{!function(){e.apply(this,arguments)}()}catch(t){console.log(t)}function e(){return e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(O);case 2:t=e.sent,o((function(){return t})),h((function(){return!1}));case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}}),[O]);var x=m?Object(Ie.jsx)("p",{children:"Loading..."}):l.map((function(e){return Object(Ie.jsx)(Re,{product:e},e._id)}));return Object(Ie.jsxs)("section",{className:"products-showcase container",children:[Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:c})}),Object(Ie.jsx)("div",{className:"products-container",children:x})]})}function et(){return Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Ze,{}),Object(Ie.jsx)($e,{query:{isPromo:!0},title:"Best deals"}),Object(Ie.jsx)($e,{title:"Latest products"})]})}r(111);function tt(){return Object(Ie.jsx)("footer",{className:"site-footer",children:Object(Ie.jsxs)("div",{className:"container",children:[Object(Ie.jsxs)("div",{className:"footer-group",children:[Object(Ie.jsxs)("h5",{children:[Object(Ie.jsx)(Te.b,{to:"/"}),"Fine wine"]}),Object(Ie.jsxs)("ul",{className:"about-us",children:[Object(Ie.jsx)("li",{children:Object(Ie.jsx)(Te.b,{to:"/about",children:"About us"})}),Object(Ie.jsx)("li",{children:Object(Ie.jsx)(Te.b,{to:"/contacts",children:"Contacts"})}),Object(Ie.jsx)("li",{children:Object(Ie.jsx)(Te.b,{to:"/terms",children:"Terms and conditions"})})]})]}),Object(Ie.jsxs)("div",{className:"footer-group",children:[Object(Ie.jsx)("h5",{children:"Customer service"}),Object(Ie.jsxs)("ul",{className:"customer-service",children:[Object(Ie.jsx)("li",{children:Object(Ie.jsx)("a",{href:"tel:+359010010101",children:"Phone: +359 010 010 101"})}),Object(Ie.jsx)("li",{children:" MON - FRI | 09:00 - 18:00"})]})]}),Object(Ie.jsxs)("div",{className:"footer-group",children:[Object(Ie.jsx)("h5",{children:"Social Media"}),Object(Ie.jsxs)("ul",{className:"social-media",children:[Object(Ie.jsx)("li",{children:Object(Ie.jsx)("a",{href:"http://www.youtube.com",children:Object(Ie.jsx)(G.p,{})})}),Object(Ie.jsx)("li",{children:Object(Ie.jsx)("a",{href:"http://www.instagram.com",children:Object(Ie.jsx)(G.h,{})})}),Object(Ie.jsx)("li",{children:Object(Ie.jsx)("a",{href:"http://www.twitter.com",children:Object(Ie.jsx)(G.o,{})})}),Object(Ie.jsx)("li",{children:Object(Ie.jsx)("a",{href:"http://www.facebook.com",children:Object(Ie.jsx)(G.g,{})})})]})]}),Object(Ie.jsx)("p",{className:"copyright",children:"\xa9Demo app made for educational purposes. No rights reserved."})]})})}r(112);function rt(){function e(e){return e.isActive?"auth-link active":"auth-link"}return Object(Ie.jsxs)("section",{className:"auth-page container",children:[Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsxs)("ul",{className:"auth-link-list",children:[Object(Ie.jsx)("li",{className:"auth-link-list-item",children:Object(Ie.jsx)(Te.c,{className:e,replace:!0,to:"/auth/login",children:"Login"})}),Object(Ie.jsx)("li",{className:"auth-link-list-item active",children:Object(Ie.jsx)(Te.c,{className:e,replace:!0,to:"/auth/register",children:"Register"})})]})}),Object(Ie.jsx)(l.b,{})]})}r(113);function at(){var e=Object(H.c)(ge).user,t=Object(l.g)();return function(r){return e._id?r:Object(Ie.jsx)(l.a,{to:"/auth/login",state:{from:t}})}}function nt(e){var t=Object(H.c)(ge).user;return function(r){return t._id?Object(Ie.jsx)(l.a,{to:e}):r}}var ct=r(9),st=r(8);function it(e,t){return e.errors[t]&&e.touched[t]}var lt=function(){return Object(Ie.jsx)("span",{className:"required-label",children:"*required"})},ot={email:"",password:""};function ut(){var e,t,r=Object(H.b)(),a=Object(l.h)(),n=Object(l.g)(),c=Object(H.c)(ge),s=c.status,o=(c.user,c.errors,(null===(e=n.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/"),u=nt(o),b=Object(ct.g)({initialValues:ot,onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(me(t)).unwrap();case 3:a(o,{replace:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.forEach((function(e){return i.b.error(e)}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:st.e({email:st.g().required("Please enter your email"),password:st.g().required("Please enter your password")})}),p="loading"===s||!b.isValid||b.isSubmitting||!b.dirty,h=it.bind(null,b);return u(Object(Ie.jsxs)("form",{className:"login-form",onSubmit:b.handleSubmit,children:[Object(Ie.jsxs)("label",{htmlFor:"email",children:["E-mail",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",className:h("email")?"error":"",placeholder:"example@email.com",id:"email"},b.getFieldProps("email"))),h("email")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.email}):null,Object(Ie.jsxs)("label",{htmlFor:"password",children:["Password",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"password",className:h("password")?"error":"",placeholder:"******",id:"password"},b.getFieldProps("password"))),h("password")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.password}):null,Object(Ie.jsx)("input",{type:"submit",className:"button submit-button",value:"Login",disabled:p})]}))}r(212);var jt={firstName:"",lastName:"",email:"",phone:"",address:"",password:"",repeatPassword:""};function dt(){var e,t,r=Object(l.h)(),a=Object(l.g)(),n=Object(H.b)(),c=Object(H.c)(ge),s=c.status,o=(c.user,c.errors,(null===(e=a.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/"),u=nt(o),b=Object(ct.g)({initialValues:jt,onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(pe(t)).unwrap();case 3:r(o,{replace:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.forEach((function(e){return i.b.error(e)}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:st.e({firstName:st.g().required("Please enter your first name"),lastName:st.g().required("Please enter your last name"),email:st.g().email("Please enter a valid email").required("Please enter your email"),password:st.g().required("Please enter your password").min(6,"Password needs to be at least 6 characters long"),repeatPassword:st.g().required("Please repeat your password").oneOf([st.f("password")],"Passwords don't match")})}),p="loading"===s||!b.isValid||b.isSubmitting||!b.dirty,h=it.bind(null,b);return u(Object(Ie.jsxs)("form",{className:"register-form",onSubmit:b.handleSubmit,children:[Object(Ie.jsxs)("label",{htmlFor:"firstName",children:["First name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"John",id:"firstName",className:h("firstName")?"error":""},b.getFieldProps("firstName"))),h("firstName")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.firstName}):null,Object(Ie.jsxs)("label",{htmlFor:"lastName",children:["Last name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"Doe",id:"lastName",className:h("lastName")?"error":""},b.getFieldProps("lastName"))),h("lastName")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.lastName}):null,Object(Ie.jsxs)("label",{htmlFor:"email",children:["E-mail",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"example@email.com",id:"email",className:h("email")?"error":""},b.getFieldProps("email"))),h("email")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.email}):null,Object(Ie.jsx)("label",{htmlFor:"phone",children:"Phone number"}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"+359888123456",id:"phone",className:h("phone")?"error":""},b.getFieldProps("phone"))),h("phone")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.phone}):null,Object(Ie.jsx)("label",{htmlFor:"address",children:"Address"}),Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"address",placeholder:"City, 1 Example street, ap.1",className:h("address")?"error":""},b.getFieldProps("address"))),h("address")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.address}):null,Object(Ie.jsxs)("label",{htmlFor:"password",children:["Password",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"password",placeholder:"******",id:"password",className:h("password")||h("repeatPassword")?"error":""},b.getFieldProps("password"))),h("password")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.password}):null,Object(Ie.jsxs)("label",{htmlFor:"repeatPassword",children:["Repeat password",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"password",placeholder:"******",id:"repeatPassword",className:h("password")||h("repeatPassword")?"error":""},b.getFieldProps("repeatPassword"))),h("password")||h("repeatPassword")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.repeatPassword}):null,Object(Ie.jsx)("input",{type:"submit",className:"button submit-button",value:"Register",disabled:p})]}))}function bt(){var e=Object(H.b)(),t=Object(l.h)();function r(){return(r=Object(d.a)(j.a.mark((function r(){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e(he());case 3:t("/auth/login",{replace:!0}),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),t("/error");case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){r.apply(this,arguments)}()})),null}var mt=Object(a.createContext)();function pt(){var e=Object(H.c)(we),t=Object(a.useState)([]),r=Object(p.a)(t,2),n=r[0],c=r[1],s=Number(n.reduce((function(e,t){return e+t.itemTotal}),0).toFixed(2)||0);return Object(a.useEffect)((function(){function t(){return t=Object(d.a)(j.a.mark((function t(r){var a,n,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y(r);case 3:a=t.sent,n=a.wines,s=n.map((function(t){return{wine:t,quantity:e[t._id],itemTotal:Number((t.currentPrice*e[t._id]||0).toFixed(2))}})),c(s),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.message.forEach((function(e){return i.b.error(e)}));case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),t.apply(this,arguments)}if(Object.keys(e).length>0){var r=new URLSearchParams;Object.keys(e).forEach((function(e){r.append("_id",e)})),function(e){t.apply(this,arguments)}(r.toString())}else c([])}),[e]),Object(Ie.jsx)(mt.Provider,{value:{cartDetails:n,cartTotal:s},children:Object(Ie.jsx)(l.b,{})})}function ht(){return at()(Object(Ie.jsx)("div",{className:"container",children:Object(Ie.jsx)(l.b,{})}))}r(213);var Ot=h+"/order";function xt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(Ot+"/"+t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Ot,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(){return yt.apply(this,arguments)}function yt(){return yt=Object(d.a)(j.a.mark((function e(){var t,r,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,v(Ot+"?"+t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),yt.apply(this,arguments)}function wt(){var e=Object(H.c)(ge),t=e.status,r=e.user,n=(e.errors,Object(a.useState)([])),c=Object(p.a)(n,2),s=c[0],o=c[1],u=Object(a.useState)(!0),b=Object(p.a)(u,2),h=(b[0],b[1]),O=Object(a.useState)(!1),x=Object(p.a)(O,2),f=x[0],v=x[1],g=at(),N=Object(H.b)(),y=Object(l.h)(),w=Object(ct.g)({initialValues:{firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone,address:r.address},onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(fe(t)).unwrap();case 3:i.b.success("Profile updated successfully!"),v((function(){return!1})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.forEach((function(e){return i.b.error(e)}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:st.e({firstName:st.g().required("Please enter your first name"),lastName:st.g().required("Please enter your last name"),email:st.g().email("Please enter a valid email").required("Please enter your email"),phone:st.g().required("Please enter your phone number"),address:st.g().required("Please enter your address")})}),P="loading"===t||!w.isValid||w.isSubmitting||!w.dirty,k=it.bind(null,w);Object(a.useEffect)((function(){try{!function(t){e.apply(this,arguments)}(r._id)}catch(t){y("/error")}function e(){return(e=Object(d.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,(a=new URLSearchParams).append("_creator",r._id),e.next=6,Nt(a.toString());case 6:n=e.sent,o((function(){return n})),h(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),y("/error");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}}),[r._id]);var C=s.map((function(e){var t=e._id,r=e._createdAt,a=e.value,n=e.status,c=e.items;return Object(Ie.jsx)("li",{children:Object(Ie.jsxs)(Te.b,{to:"/order/".concat(t),className:"order-info",children:[Object(Ie.jsx)("span",{className:"order-date",children:new Date(r).toLocaleDateString()}),Object(Ie.jsx)("span",{className:"order-status",children:n}),Object(Ie.jsx)("span",{className:"order-items",children:c.length}),Object(Ie.jsx)("span",{className:"order-total",children:a.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]})},t)}));return g(Object(Ie.jsxs)("section",{className:"page checkout",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"User Profile"}),Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:"Profile Summary"})}),Object(Ie.jsxs)("form",{className:"checkout-form",onSubmit:w.handleSubmit,children:[Object(Ie.jsxs)("div",{className:"form-content",children:[Object(Ie.jsx)("h4",{className:"group-title",children:"Personal Information"}),Object(Ie.jsxs)("label",{htmlFor:"firstName",children:["First name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({disabled:!f,type:"text",placeholder:"John",id:"firstName",className:k("firstName")?"error":""},w.getFieldProps("firstName"))),k("firstName")?Object(Ie.jsx)("div",{className:"errors",children:w.errors.firstName}):null,Object(Ie.jsxs)("label",{htmlFor:"lastName",children:["Last name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({disabled:!f,type:"text",placeholder:"Doe",id:"lastName",className:k("lastName")?"error":""},w.getFieldProps("lastName"))),k("lastName")?Object(Ie.jsx)("div",{className:"errors",children:w.errors.lastName}):null,Object(Ie.jsxs)("label",{htmlFor:"email",children:["E-mail",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({disabled:!f,type:"text",placeholder:"example@email.com",id:"email",className:k("email")?"error":""},w.getFieldProps("email"))),k("email")?Object(Ie.jsx)("div",{className:"errors",children:w.errors.email}):null,Object(Ie.jsxs)("label",{htmlFor:"phone",children:["Phone number",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({disabled:!f,type:"text",placeholder:"+359888123456",id:"phone",className:k("phone")?"error":""},w.getFieldProps("phone"))),k("phone")?Object(Ie.jsx)("div",{className:"errors",children:w.errors.phone}):null,Object(Ie.jsxs)("label",{htmlFor:"address",children:["Address",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({disabled:!f,type:"text",id:"address",placeholder:"City, 1 Example street, ap.1",className:k("address")?"error":""},w.getFieldProps("address"))),k("address")?Object(Ie.jsx)("div",{className:"errors",children:w.errors.address}):null,f?Object(Ie.jsx)("input",{type:"submit",className:"button submit-button",value:"Update Profile",disabled:P}):null,f?null:Object(Ie.jsx)("button",{type:"button",className:"button",onClick:function(){return v((function(){return!0}))},children:"Edit Profile"})]}),Object(Ie.jsxs)("div",{className:"order-history",children:[Object(Ie.jsx)("h4",{className:"group-title",children:"Ordering history"}),Object(Ie.jsxs)("ul",{className:"order-list",children:[Object(Ie.jsxs)("li",{className:"order-info",children:[Object(Ie.jsx)("span",{className:"order-date",children:"Date"}),Object(Ie.jsx)("span",{className:"order-status",children:"Status"}),Object(Ie.jsx)("span",{className:"order-items",children:"Items"}),Object(Ie.jsx)("span",{className:"order-total",children:"Total"})]}),C]})]})]}),Object(Ie.jsx)("div",{className:"logout-container",children:Object(Ie.jsx)(Te.b,{className:"button logout-button",to:"/auth/logout",children:"Logout"})})]}))}r(214);function Pt(){var e=Object(a.useContext)(mt),t=e.cartDetails,r=e.cartTotal,n=Object(H.c)(ge),c=n.status,s=n.user,o=(n.errors,Object(H.b)()),u=Object(l.h)(),b=Object(ct.g)({initialValues:{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,address:s.address},onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(r){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={recipient:r,items:t.map((function(e){return{wine:e.wine._id,quantity:e.quantity,price:e.wine.currentPrice}}))},e.next=4,vt(a);case 4:n=e.sent,o((function(e,t){try{e(Ee()),localStorage.setItem("cart",JSON.stringify(Ne))}catch(r){console.error(r)}})),i.b.success("Thank you for your order!"),u("/order/".concat(n._id),{replace:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.forEach((function(e){return i.b.error(e)}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:st.e({firstName:st.g().required("Please enter your first name"),lastName:st.g().required("Please enter your last name"),email:st.g().email("Please enter a valid email").required("Please enter your email"),phone:st.g().required("Please enter your phone number"),address:st.g().required("Please enter your address")})}),p="loading"===c||!b.isValid||b.isSubmitting||!s._id&&!b.dirty,h=it.bind(null,b),O=t.map((function(e){var t=e.wine,r=e.quantity,a=e.itemTotal;return Object(Ie.jsxs)("li",{className:"item-info",children:[Object(Ie.jsxs)("span",{className:"item-label",children:[t.brand," | ",t.name]}),Object(Ie.jsxs)("span",{className:"item-quantity",children:["x",r]}),Object(Ie.jsx)("span",{className:"item-total",children:a.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]},t._id)}));return 0===t.length?Object(Ie.jsx)(l.a,{to:"/cart",replace:!0}):Object(Ie.jsxs)("section",{className:"page checkout container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Order Checkout"}),Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:"Order Summary"})}),Object(Ie.jsxs)("form",{className:"checkout-form",onSubmit:b.handleSubmit,children:[Object(Ie.jsxs)("div",{className:"item-summary",children:[Object(Ie.jsx)("h4",{className:"group-title",children:"Item summary"}),Object(Ie.jsx)("ul",{className:"item-list",children:O}),Object(Ie.jsxs)("div",{className:"list-total",children:[Object(Ie.jsx)("h4",{className:"order-total-label",children:"Order Total"}),Object(Ie.jsx)("h4",{className:"order-total-value",children:r.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]})]}),Object(Ie.jsxs)("div",{className:"form-content",children:[Object(Ie.jsx)("h4",{className:"group-title",children:"Contact Information"}),Object(Ie.jsxs)("label",{htmlFor:"firstName",children:["First name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"John",id:"firstName",className:h("firstName")?"error":""},b.getFieldProps("firstName"))),h("firstName")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.firstName}):null,Object(Ie.jsxs)("label",{htmlFor:"lastName",children:["Last name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"Doe",id:"lastName",className:h("lastName")?"error":""},b.getFieldProps("lastName"))),h("lastName")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.lastName}):null,Object(Ie.jsxs)("label",{htmlFor:"email",children:["E-mail",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"example@email.com",id:"email",className:h("email")?"error":""},b.getFieldProps("email"))),h("email")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.email}):null,Object(Ie.jsxs)("label",{htmlFor:"phone",children:["Phone number",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",placeholder:"+359888123456",id:"phone",className:h("phone")?"error":""},b.getFieldProps("phone"))),h("phone")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.phone}):null,Object(Ie.jsxs)("label",{htmlFor:"address",children:["Address",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"address",placeholder:"City, 1 Example street, ap.1",className:h("address")?"error":""},b.getFieldProps("address"))),h("address")?Object(Ie.jsx)("div",{className:"errors",children:b.errors.address}):null]}),Object(Ie.jsx)("input",{type:"submit",className:"button submit-button",value:"Place Order",disabled:p})]})]})}r(215),r(216);function kt(e){var t=e.wine,r=e.quantity,a=e.itemTotal,n=e.ordered,c=Object(H.b)();function s(e){switch(e.currentTarget.id){case"increase":return c(qe(t._id));case"decrease":return c((r=t._id,function(e,t){try{e(Se(r)),localStorage.setItem("cart",JSON.stringify(t().cart))}catch(a){console.error(a)}}));case"remove":return c(function(e){return function(t,r){try{t(Fe(e)),localStorage.setItem("cart",JSON.stringify(r().cart))}catch(a){console.error(a)}}}(t._id));default:return}var r}return t?Object(Ie.jsxs)("article",{className:"cart-item",children:[Object(Ie.jsx)(Te.b,{to:"/details/".concat(t._id),className:"info image",children:Object(Ie.jsx)("img",{src:t.image,alt:t.name})}),Object(Ie.jsxs)("div",{className:"info product",children:[Object(Ie.jsx)("p",{className:"brand",children:t.brand}),Object(Ie.jsx)(Te.b,{to:"/details/".concat(t._id),className:"name",children:t.name}),Object(Ie.jsx)("p",{className:"grapes",children:t.grape.join(" ,")}),Object(Ie.jsxs)("div",{className:"geo",children:[Object(Ie.jsx)("span",{className:"year",children:t.year})," | ",Object(Ie.jsx)("span",{className:"country",children:t.country})]})]}),Object(Ie.jsx)("div",{className:"info price",children:Number(t.currentPrice.toFixed(2)).toLocaleString("en-GB",{style:"currency",currency:"EUR"})}),Object(Ie.jsx)("div",{className:"info quantity",children:n?Object(Ie.jsx)("span",{className:"quantity-value",children:r}):Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("button",{className:"cart-item-button decrease",onClick:s,id:"decrease",children:Object(Ie.jsx)(G.i,{})}),Object(Ie.jsx)("span",{className:"quantity-value",children:r}),Object(Ie.jsx)("button",{className:"cart-item-button increase",onClick:s,id:"increase",children:Object(Ie.jsx)(G.j,{})})]})}),Object(Ie.jsx)("div",{className:"info item-total",children:a.toLocaleString("en-GB",{style:"currency",currency:"EUR"})}),n?null:Object(Ie.jsx)("div",{className:"remove-item-container",children:Object(Ie.jsx)("button",{className:"cart-item-button remove-item",onClick:s,id:"remove",children:Object(Ie.jsx)(G.n,{})})})]}):null}function Ct(){var e=Object(l.g)(),t=Object(a.useContext)(mt),r=t.cartDetails,n=t.cartTotal,c=Object(H.c)(ge).user,s=0===r.length?Object(Ie.jsxs)("article",{className:"empty-cart",children:[Object(Ie.jsx)("h4",{className:"heading",children:"Your cart is currently empty"}),Object(Ie.jsx)(Te.b,{className:"main-text",to:"/catalogue",children:"Please have a look at our catalogue and select the best wine for your occasion"}),Object(Ie.jsx)(Te.b,{className:"button catalogue-button",to:"/catalogue",children:"Catalogue"})]}):Object(Ie.jsxs)("div",{className:"cart-container",children:[Object(Ie.jsxs)("div",{className:"table-header",children:[Object(Ie.jsx)("h4",{className:"product",children:"Product"}),Object(Ie.jsx)("h4",{className:"price",children:"Price"}),Object(Ie.jsx)("h4",{className:"quantity",children:"Quantity"}),Object(Ie.jsx)("h4",{className:"item-total",children:"Item Total"})]}),Object(Ie.jsx)("div",{className:"table-body",children:r.map((function(e){var t=e.wine,r=e.quantity,a=e.itemTotal;return Object(Ie.jsx)(kt,{wine:t,quantity:r,itemTotal:a},t._id)}))}),Object(Ie.jsxs)("div",{className:"table-footer",children:[Object(Ie.jsxs)("div",{className:"subtotal",children:[Object(Ie.jsx)("div",{className:"subtotal-label",children:"Subtotal:"}),Object(Ie.jsx)("div",{className:"subtotal-value",children:n.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]}),Object(Ie.jsx)(Te.b,{className:"button checkout-button",to:"/cart/checkout",children:"Proceed to checkout"})]})]});return Object(Ie.jsxs)("section",{className:"page cart container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Shopping Cart"}),c._id?null:Object(Ie.jsxs)("article",{className:"guest-user",children:[Object(Ie.jsx)("h4",{className:"heading",children:"You are still a guest user"}),Object(Ie.jsx)(Te.b,{className:"main-text",to:"/auth/login",state:{from:e},children:"Register or sign in to your account for additional functionality and a better experience"})]}),s]})}r(217);function St(){var e=Object(H.c)(ge).user,t=Object(a.useState)([]),r=Object(p.a)(t,2),n=r[0],c=r[1],s=Object(a.useCallback)(function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(t._id);case 3:r=e.sent,c((function(){return r})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.message.forEach((function(e){return i.b.error(e)}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){s(e)}),[s,e]);var l=0===n.length?Object(Ie.jsxs)("article",{className:"empty-cart",children:[Object(Ie.jsx)("h4",{className:"heading",children:"Your haven't bookmarked any favorites yet"}),Object(Ie.jsx)(Te.b,{className:"main-text",to:"/catalogue",children:"Please have a look at our catalogue and select the best wine for your occasion"}),Object(Ie.jsx)(Te.b,{className:"button catalogue-button",to:"/catalogue",children:"Catalogue"})]}):Object(Ie.jsxs)("div",{className:"favorites-container",children:[Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsxs)("h4",{children:[e.firstName,"'s selection"]})}),Object(Ie.jsx)("div",{className:"products-container",children:n.map((function(e){return Object(Ie.jsx)(Re,{product:e},e._id)}))})]});return Object(Ie.jsxs)("section",{className:"page favorites",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Favorites"}),l]})}r(218),r(219);var Ft=r(55);function Et(){var e=Object(a.createRef)(),t=Object(a.useContext)(_t),r=t.modalState,n=t.closeModal;Object(a.useEffect)((function(){return e.current&&Object(Ft.b)(e.current),function(){return Object(Ft.a)()}}),[e]);var c=function(e){n(),r.callback(e)};return r.active?Object(Ie.jsx)("div",{className:"overlay",children:Object(Ie.jsxs)("div",{ref:e,className:"dialog-box",children:[Object(Ie.jsx)("p",{className:"message",children:r.message}),Object(Ie.jsxs)("div",{className:"buttons",children:[Object(Ie.jsx)("button",{onClick:function(){return c(!0)},className:"button accept",children:"Confirm"}),Object(Ie.jsx)("button",{onClick:function(){return c(!1)},className:"button reject",children:"Cancel"})]})]})}):null}var _t=Object(a.createContext)(),qt={active:!1,message:"",callback:void 0};function It(e){var t=e.children,r=Object(a.useState)(qt),n=Object(p.a)(r,2),c=n[0],s=n[1];return Object(Ie.jsx)(_t.Provider,{value:{modalState:c,createModal:function(e,t){s((function(r){return{active:!0,message:e,callback:t}}))},closeModal:function(){s(qt)}},children:t})}function Rt(){var e=Object(l.i)().wineId,t=Object(a.useState)({}),r=Object(p.a)(t,2),n=r[0],c=r[1],s=Object(a.useState)(!0),o=Object(p.a)(s,2),u=o[0],b=o[1],m=Object(H.c)(ge).user,h=Object(H.b)(),O=Object(l.h)(),x=Object(a.useContext)(_t).createModal;function f(e){e.stopPropagation(),(null===m||void 0===m?void 0:m.favorites.includes(null===n||void 0===n?void 0:n._id))?h(xe({userId:m._id,wineId:n._id})):h(Oe({userId:m._id,wineId:n._id}))}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.prev=1,e.next=4,W(n._id);case 4:O("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),O("/error");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}Object(a.useEffect)((function(){function t(){return t=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:r=e.sent,c((function(){return r})),b((function(){return!1})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),O("/error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),t.apply(this,arguments)}!function(e){t.apply(this,arguments)}(e)}),[O,e]);var N=m.favorites.includes(null===n||void 0===n?void 0:n._id)?Object(Ie.jsx)(G.m,{onClick:f}):Object(Ie.jsx)(G.l,{onClick:f});return u?Object(Ie.jsx)(Ve,{}):Object(Ie.jsxs)("section",{className:"page details container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Wine Details"}),Object(Ie.jsxs)("header",{className:"section-header",children:[Object(Ie.jsxs)("h4",{children:[n.name," ",n.year]}),m._id&&!m._isAdmin&&Object(Ie.jsx)("div",{className:"favorite-icon-container",children:N})]}),Object(Ie.jsxs)("div",{className:"wine-details",children:[Object(Ie.jsx)("div",{className:"image-container",children:Object(Ie.jsx)("img",{src:n.image,alt:n.name})}),Object(Ie.jsxs)("div",{className:"wine-data",children:[Object(Ie.jsxs)("div",{className:"data-group",children:[Object(Ie.jsx)("h4",{className:"group-title",children:"Specifications"}),Object(Ie.jsxs)("ul",{className:"data-list",children:[Object(Ie.jsxs)("li",{className:"brand list-item",children:[Object(Ie.jsx)("span",{className:"brand label",children:"brand:"}),Object(Ie.jsx)("span",{className:"brand text",children:n.brand})]}),Object(Ie.jsxs)("li",{className:"name list-item",children:[Object(Ie.jsx)("span",{className:"name label",children:"name:"}),Object(Ie.jsx)("span",{className:"name text",children:n.name})]}),Object(Ie.jsxs)("li",{className:"type list-item",children:[Object(Ie.jsx)("span",{className:"type label",children:"type:"}),Object(Ie.jsx)("span",{className:"type text",children:n.type})]}),Object(Ie.jsxs)("li",{className:"grape list-item",children:[Object(Ie.jsx)("span",{className:"grape label",children:"grape:"}),Object(Ie.jsx)("span",{className:"grape text",children:n.grape.join(", ")})]}),Object(Ie.jsxs)("li",{className:"year list-item",children:[Object(Ie.jsx)("span",{className:"year label",children:"vintage:"}),Object(Ie.jsx)("span",{className:"year text",children:n.year})]}),Object(Ie.jsxs)("li",{className:"country list-item",children:[Object(Ie.jsx)("span",{className:"country label",children:"country:"}),Object(Ie.jsx)("span",{className:"country text",children:n.country})]}),Object(Ie.jsxs)("li",{className:"region list-item",children:[Object(Ie.jsx)("span",{className:"region label",children:"region:"}),Object(Ie.jsx)("span",{className:"region text",children:n.region})]}),Object(Ie.jsxs)("li",{className:"volume list-item",children:[Object(Ie.jsx)("span",{className:"volume label",children:"volume:"}),Object(Ie.jsxs)("span",{className:"volume text",children:[n.volume," litres"]})]})]})]}),Object(Ie.jsxs)("div",{className:"data-group",children:[Object(Ie.jsx)("h4",{className:"group-title",children:"Description"}),Object(Ie.jsx)("p",{className:"description",children:n.description})]}),Object(Ie.jsx)("div",{className:"prices",children:n.isPromo?Object(Ie.jsxs)("p",{className:"price",children:[Object(Ie.jsx)("span",{className:"discounted-label",children:"Super Price:"}),Object(Ie.jsx)("span",{className:"old-price",children:n.basePrice.toLocaleString("en-GB",{style:"currency",currency:"EUR"})}),Object(Ie.jsx)("span",{className:"current-price",children:n.currentPrice.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]}):Object(Ie.jsxs)("p",{children:[Object(Ie.jsx)("span",{children:"Price:"}),Object(Ie.jsx)("span",{className:"base-price",children:n.currentPrice.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]})}),Object(Ie.jsx)("div",{className:"buttons",children:m._isAdmin?Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Te.b,{to:"/admin/edit/".concat(n._id),className:"button edit-button",children:"Edit Wine"}),Object(Ie.jsx)("button",{className:"button delete-button",onClick:function(){return x("Are you sure you want to delete this wine listing?",v)},children:"Delete Wine"})]}):Object(Ie.jsx)("button",{className:"button add-to-cart",onClick:function(){h(qe(n._id)),i.b.success("Wine added to cart")},children:"Add to cart"})})]})]})]})}function Yt(){var e,t;return function(e){var t=Object(H.c)(ge).user;return function(r){return t._isAdmin?r:Object(Ie.jsx)(l.a,{to:e})}}((null===(e=Object(l.g)().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/")(Object(Ie.jsx)(l.b,{}))}r(220);var Lt=r(88);function At(e){var t=e.name,r=Object(a.useState)([]),n=Object(p.a)(r,2),c=n[0],s=n[1],i=Object(ct.f)(t),l=Object(p.a)(i,3),o=(l[0],l[1]),u=l[2],j=Object(a.useCallback)((function(e,t){var r=e.map((function(e){return{file:e,errors:[]}})),a=[].concat(Object(b.a)(r),Object(b.a)(t)).map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e.file)})}));s((function(){return a})),u.setValue(a),u.setTouched(!0,!0)}),[]),d=Object(a.useCallback)((function(e,t){var r=["dropzone"];return t&&r.push("active"),e.touched&&e.error&&r.push("error"),r.join(" ")}),[]);Object(a.useEffect)((function(){u.setValue(c)}),[c]);var h=Object(Lt.a)({onDrop:j,accept:"image/*",maxFiles:1,maxSize:512e3,multiple:!1}),O=h.isDragActive,x=h.getRootProps,f=h.getInputProps;return Object(Ie.jsxs)("div",{className:"files",children:[Object(Ie.jsxs)("div",{className:"dropzone-container",children:[Object(Ie.jsxs)("label",{htmlFor:"dropzone",children:["image",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsxs)("div",Object(m.a)(Object(m.a)({},x({className:d(o,O)})),{},{children:[Object(Ie.jsx)("input",Object(m.a)({id:"dropzone"},f())),Object(Ie.jsx)("p",{children:"Drag&drop files here, or click to select"})]})),o.touched&&o.error&&"string"===typeof o.error?Object(Ie.jsx)("div",{className:"errors",children:o.error}):null]}),Object(Ie.jsx)("ul",{className:"file-list",children:c.map((function(e){return Object(Ie.jsxs)("li",{className:0===e.errors.length?"selected-file":"selected-file error",children:[Object(Ie.jsxs)("header",{className:"item-header",children:[Object(Ie.jsx)("div",{className:"file-data",children:Object(Ie.jsx)("span",{className:"filename",children:e.file.path})}),Object(Ie.jsx)("div",{className:"errors",children:e.errors.map((function(e){return Object(Ie.jsx)("p",{children:e.message},e.message)}))}),Object(Ie.jsx)("button",{type:"button",className:"remove remove-input",onClick:function(){return t=e,void s((function(e){var r=Object(b.a)(e.filter((function(e){return e!==t})));return 1===(r=r.map((function(e){return Object(m.a)({},e)}))).length&&(r[0].errors=r[0].errors.filter((function(e){return"too-many-files"!==e.code}))),r}));var t},children:Object(Ie.jsx)(G.n,{})})]}),Object(Ie.jsx)("img",{src:e.preview,alt:""})]},e.file.path)}))})]})}var Dt={brand:"",name:"",description:"",type:"",grape:[""],country:"",region:"",year:2021,volume:.75,basePrice:0,discountPercentage:0,files:[]},Tt=st.e({brand:st.g().required("Please enter wine brand"),name:st.g().required("Please enter wine name"),description:st.g().required("Please enter wine description"),type:st.c().required("Please enter wine type").oneOf(["red","white","rose","sparkling","dessert"],"Type must be one of red, white, rose, sparkling or dessert"),grape:st.a(st.g().required("Please enter grape")).min(1,"Please enter at least 1 grape"),country:st.g().required("Please enter wine country"),region:st.g().required("Please enter wine region"),year:st.d().required("Please enter wine year").min(1900,"Wine year must be after 1900"),volume:st.d().required("Please enter wine volume").moreThan(0,"Wine volume must be positive"),basePrice:st.d().required("Please enter wine price").moreThan(0,"Wine price must be greater than 0"),discountPercentage:st.d().min(0,"Discount percentage must be between 0-100").max(100,"Discount percentage must be between 0-100"),files:st.a(st.e({errors:st.a().max(0,"Incorrect file")})).min(1,"Please upload wine image")});function Ut(){var e=Object(l.h)(),t=Object(a.useCallback)(function(){var t=Object(d.a)(j.a.mark((function t(r){var a,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new FormData,Object.entries(r).forEach((function(e){var t=Object(p.a)(e,2),r=t[0],n=t[1];"string"===typeof n||"number"===typeof n?a.append(r,n):Array.isArray(n)&&("files"!==r?n.forEach((function(e){a.append(r,e)})):n.forEach((function(e){var t=e.file;a.append(r,t)})))})),t.next=5,T(a);case 5:n=t.sent,e("/details/".concat(n._id)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.forEach((function(e){return i.b.error(e)}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),[e]),r=Object(a.useCallback)((function(e){var t=e.touched,r=e.error;return t&&r?"error":""}),[]);return Object(Ie.jsxs)("section",{className:"create page container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Create Form"}),Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:"New Wine Listing"})}),Object(Ie.jsx)(ct.e,{initialValues:Dt,onSubmit:t,validationSchema:Tt,children:function(e){return Object(Ie.jsxs)(ct.d,{className:"create-form",children:[Object(Ie.jsx)(At,{name:"files"}),Object(Ie.jsxs)("div",{className:"fields",children:[Object(Ie.jsxs)("label",{htmlFor:"brand",children:["brand",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"brand",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"brand",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"brand"}),Object(Ie.jsxs)("label",{htmlFor:"name",children:["name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"name",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"name",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"name"}),Object(Ie.jsxs)("label",{htmlFor:"type",children:["type",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"type",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"type",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"type"}),Object(Ie.jsx)(ct.c,Object(m.a)(Object(m.a)({name:"grape"},e.getFieldProps("grape")),{},{children:function(t){var n=t.remove,c=t.push;t.form;return Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)("label",{children:["grape",Object(Ie.jsx)(lt,{})]}),e.values.grape.map((function(t,c){return Object(Ie.jsx)(a.Fragment,{children:Object(Ie.jsx)(ct.b,{name:"grape[".concat(c,"]"),children:function(t){var a=t.meta,s=t.field;return Object(Ie.jsxs)("div",{className:"form-group",children:[Object(Ie.jsxs)("div",{className:"group-main",children:[Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"grape[".concat(c,"]"),className:r(a)},s)),e.values.grape.length>1?Object(Ie.jsx)("button",{className:"remove-input",onClick:function(){return n(c)},children:Object(Ie.jsx)(G.n,{})}):null]}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"grape[".concat(c,"]")})]})}})},c)})),Object(Ie.jsx)("button",{type:"button",onClick:function(){return c("")},className:"button secondary",children:"Add more grapes"})]})}})),Object(Ie.jsxs)("label",{htmlFor:"description",children:["description",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"description",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("textarea",Object(m.a)({rows:"8",type:"text",id:"description",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"description"}),Object(Ie.jsxs)("label",{htmlFor:"country",children:["country",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"country",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"country",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"country"}),Object(Ie.jsxs)("label",{htmlFor:"region",children:["region",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"region",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"region",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"region"}),Object(Ie.jsxs)("label",{htmlFor:"year",children:["year",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"year",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"year",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"year"}),Object(Ie.jsxs)("label",{htmlFor:"volume",children:["volume",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"volume",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"volume",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"volume"}),Object(Ie.jsxs)("label",{htmlFor:"basePrice",children:["base price",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"basePrice",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"basePrice",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"basePrice"}),Object(Ie.jsxs)("label",{htmlFor:"discountPercentage",children:["discount percentage",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"discountPercentage",children:function(e){var t=e.meta,a=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"discountPercentage",className:r(t)},a))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"discountPercentage"}),Object(Ie.jsx)("input",{type:"submit",className:"button submit-button",value:"Create Listing",disabled:!e.isValid||e.isSubmitting||!e.dirty})]})]})}})]})}r(221);function Vt(){return Object(Ie.jsxs)("section",{className:"page error container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Page Error"}),Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:"Looks like we have encountered a problem"})}),Object(Ie.jsx)("div",{className:"main-text",children:Object(Ie.jsx)("p",{children:"Please accept out apologies for the inconvenience caused. Clicking the button below button will lead you back to our home page."})}),Object(Ie.jsx)(Te.b,{className:"button return",to:"/",children:"Return Home"})]})}r(222);var Mt={brand:"",name:"",description:"",type:"",grape:[""],country:"",region:"",year:2021,volume:.75,basePrice:0,discountPercentage:0,image:"",files:[],isNewImage:!1},Wt=st.e({brand:st.g().required("Please enter wine brand"),name:st.g().required("Please enter wine name"),description:st.g().required("Please enter wine description"),type:st.c().required("Please enter wine type").oneOf(["red","white","rose","sparkling","dessert"],"Type must be one of red, white, rose, sparkling or dessert"),grape:st.a(st.g().required("Please enter grape")).min(1,"Please enter at least 1 grape"),country:st.g().required("Please enter wine country"),region:st.g().required("Please enter wine region"),year:st.d().required("Please enter wine year").min(1900,"Wine year must be after 1900"),volume:st.d().required("Please enter wine volume").moreThan(0,"Wine volume must be positive"),basePrice:st.d().required("Please enter wine price").moreThan(0,"Wine price must be greater than 0"),discountPercentage:st.d().min(0,"Discount percentage must be between 0-100").max(100,"Discount percentage must be between 0-100"),isNewImage:st.b(),image:st.g().when("isNewImage",{is:!1,then:st.g().required("Please upload at least one image")}),files:st.a(st.e({errors:st.a().max(0,"Incorrect file")})).when("isNewImage",{is:!0,then:st.a().min(1,"Please upload wine image")})});function Bt(){var e=Object(a.useState)(Mt),t=Object(p.a)(e,2),r=t[0],n=t[1],c=Object(l.i)().wineId,s=Object(l.h)(),o=Object(a.useCallback)(function(){var e=Object(d.a)(j.a.mark((function e(t){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new FormData,Object.entries(t).forEach((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];"string"===typeof n||"number"===typeof n?r.append(a,n):Array.isArray(n)&&("files"!==a?n.forEach((function(e){r.append(a,e)})):n.forEach((function(e){var t=e.file;r.append(a,t)})))})),e.next=5,V(c,r);case 5:a=e.sent,s("/details/".concat(a._id)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.forEach((function(e){return i.b.error(e)}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[s,c]),u=Object(a.useCallback)((function(e){var t=e.touched,r=e.error;return t&&r?"error":""}),[]);return Object(a.useEffect)((function(){try{!function(t){e.apply(this,arguments)}(c)}catch(t){s("/error")}function e(){return e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:r=e.sent,n((function(){return r}));case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}}),[s,c]),Object(Ie.jsxs)("section",{className:"edit page container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Edit Form"}),Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:"Edit Wine Listing"})}),Object(Ie.jsx)(ct.e,{enableReinitialize:!0,initialValues:Object(m.a)(Object(m.a)({},Mt),r),onSubmit:o,validationSchema:Wt,children:function(e){return Object(Ie.jsxs)(ct.d,{className:"edit-form",children:[e.values.isNewImage?Object(Ie.jsxs)("div",{className:"dropzone-wrapper",children:[Object(Ie.jsx)(At,{name:"files"}),Object(Ie.jsx)("button",{className:"button secondary cancel-upload",type:"button",onClick:function(){e.setFieldValue("isNewImage",!e.values.isNewImage),e.setTouched({files:!1})},children:"Cancel upload"})]}):Object(Ie.jsxs)("div",{className:"image-preview",children:[Object(Ie.jsxs)("label",{children:["image",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsxs)("div",{className:"image-container",children:[Object(Ie.jsx)("button",{type:"button",className:"preview-remove remove-input",onClick:function(){return e.setFieldValue("isNewImage",!e.values.isNewImage)},children:Object(Ie.jsx)(G.n,{})}),Object(Ie.jsx)("img",{src:e.values.image,alt:""})]})]}),Object(Ie.jsxs)("div",{className:"fields",children:[Object(Ie.jsxs)("label",{htmlFor:"brand",children:["brand",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"brand",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"brand",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"brand"}),Object(Ie.jsxs)("label",{htmlFor:"name",children:["name",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"name",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"name",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"name"}),Object(Ie.jsxs)("label",{htmlFor:"type",children:["type",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"type",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"type",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"type"}),Object(Ie.jsx)(ct.c,Object(m.a)(Object(m.a)({name:"grape"},e.getFieldProps("grape")),{},{children:function(t){var r=t.remove,n=t.push;t.form;return Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)("label",{children:["grape",Object(Ie.jsx)(lt,{})]}),e.values.grape.map((function(t,n){return Object(Ie.jsx)(a.Fragment,{children:Object(Ie.jsx)(ct.b,{name:"grape[".concat(n,"]"),children:function(t){var a=t.meta,c=t.field;return Object(Ie.jsxs)("div",{className:"form-group",children:[Object(Ie.jsxs)("div",{className:"group-main",children:[Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"grape[".concat(n,"]"),className:u(a)},c)),e.values.grape.length>1?Object(Ie.jsx)("button",{className:"remove-input",onClick:function(){return r(n)},children:Object(Ie.jsx)(G.n,{})}):null]}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"grape[".concat(n,"]")})]})}})},n)})),Object(Ie.jsx)("button",{type:"button",onClick:function(){return n("")},className:"button secondary",children:"Add more grapes"})]})}})),Object(Ie.jsxs)("label",{htmlFor:"description",children:["description",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"description",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("textarea",Object(m.a)({rows:"8",type:"text",id:"description",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"description"}),Object(Ie.jsxs)("label",{htmlFor:"country",children:["country",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"country",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"country",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"country"}),Object(Ie.jsxs)("label",{htmlFor:"region",children:["region",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"region",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"text",id:"region",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"region"}),Object(Ie.jsxs)("label",{htmlFor:"year",children:["year",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"year",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"year",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"year"}),Object(Ie.jsxs)("label",{htmlFor:"volume",children:["volume",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"volume",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"volume",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"volume"}),Object(Ie.jsxs)("label",{htmlFor:"basePrice",children:["base price",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"basePrice",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"basePrice",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"basePrice"}),Object(Ie.jsxs)("label",{htmlFor:"discountPercentage",children:["discount percentage",Object(Ie.jsx)(lt,{})]}),Object(Ie.jsx)(ct.b,{name:"discountPercentage",children:function(e){var t=e.meta,r=e.field;return Object(Ie.jsx)("input",Object(m.a)({type:"number",id:"discountPercentage",className:u(t)},r))}}),Object(Ie.jsx)(ct.a,{component:"div",className:"errors",name:"discountPercentage"}),Object(Ie.jsx)("input",{type:"submit",className:"button submit-button",value:"Edit Listing",disabled:!e.isValid||e.isSubmitting||!e.dirty})]})]})}})]})}r(223);function Gt(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),r=t[0],n=t[1],c=Object(l.h)();return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new URLSearchParams).append("sort","_createdAt"),e.next=5,Nt(t.toString());case 5:r=e.sent,n((function(){return r})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c("/error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(Ie.jsxs)("section",{className:"page dashboard container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Admin Dashboard"}),Object(Ie.jsx)("header",{className:"section-header",children:Object(Ie.jsx)("h4",{children:"Latest Orders"})}),Object(Ie.jsx)("div",{className:"dashboard-content",children:Object(Ie.jsxs)("ul",{className:"order-list",children:[Object(Ie.jsxs)("li",{className:"order-info headers",children:[Object(Ie.jsx)("span",{className:"order-id",children:"Number"}),Object(Ie.jsx)("span",{className:"order-date",children:"Date"}),Object(Ie.jsx)("span",{className:"order-status",children:"Status"}),Object(Ie.jsx)("span",{className:"order-items",children:"Items"}),Object(Ie.jsx)("span",{className:"order-total",children:"Total"})]}),r.map((function(e){var t=e._id,r=e._createdAt,a=e.value,n=e.status,c=e.items;return Object(Ie.jsx)("li",{children:Object(Ie.jsxs)(Te.b,{to:"/order/".concat(t),className:"order-info",children:[Object(Ie.jsx)("span",{className:"order-id",children:t}),Object(Ie.jsx)("span",{className:"order-date",children:new Date(r).toLocaleDateString()}),Object(Ie.jsx)("span",{className:"order-status",children:n}),Object(Ie.jsx)("span",{className:"order-items",children:c.length}),Object(Ie.jsx)("span",{className:"order-total",children:a.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]})},t)}))]})})]})}r(224);function Ht(){var e=Object(l.i)().orderId,t=Object(a.useState)(null),r=Object(p.a)(t,2),n=r[0],c=r[1],s=Object(l.h)();Object(a.useEffect)((function(){function t(){return(t=Object(d.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xt(e);case 3:r=t.sent,c((function(){return r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),s("/");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[s,e]);var i=n?Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)("div",{className:"table-body",children:n.items.map((function(e){var t=e.wine,r=e.quantity,a=e.itemTotal;return Object(Ie.jsx)(kt,{wine:t,quantity:r,itemTotal:a,ordered:!0},t._id)}))}),Object(Ie.jsxs)("div",{className:"table-footer",children:[Object(Ie.jsxs)("div",{className:"complimentary",children:[Object(Ie.jsxs)("div",{className:"status",children:[Object(Ie.jsx)("div",{className:"status-label",children:"Order Status:"}),Object(Ie.jsx)("div",{className:"status-value",children:n.status})]}),Object(Ie.jsxs)("div",{className:"date",children:[Object(Ie.jsx)("div",{className:"date-label",children:"Order Date:"}),Object(Ie.jsx)("div",{className:"date-value",children:new Date(n._createdAt).toLocaleDateString()})]})]}),Object(Ie.jsxs)("div",{className:"total",children:[Object(Ie.jsx)("div",{className:"total-label",children:"Order Total:"}),Object(Ie.jsx)("div",{className:"total-value",children:n.value.toLocaleString("en-GB",{style:"currency",currency:"EUR"})})]})]})]}):null;return Object(Ie.jsxs)("section",{className:"page order container",children:[Object(Ie.jsx)("h1",{className:"page-title",children:"Order Details"}),Object(Ie.jsxs)("div",{className:"order-container",children:[Object(Ie.jsxs)("div",{className:"table-header",children:[Object(Ie.jsx)("h4",{className:"product",children:"Product"}),Object(Ie.jsx)("h4",{className:"price",children:"Price"}),Object(Ie.jsx)("h4",{className:"quantity",children:"Quantity"}),Object(Ie.jsx)("h4",{className:"item-total",children:"Item Total"})]}),i]})]})}var Jt=function(){var e=Object(H.b)(),t=Object(a.useRef)();return Object(a.useEffect)((function(){try{e(be()),e((function(e){try{var t=localStorage.getItem("cart");if(t){var r=JSON.parse(t);e(ke(r))}else localStorage.setItem("cart","{}")}catch(a){console.error(a)}}))}catch(t){console.log(t)}}),[e]),Object(Ie.jsxs)("div",{className:"App",children:[Object(Ie.jsx)(ze,{mainRef:t}),Object(Ie.jsxs)("main",{className:"site-content",ref:t,children:[Object(Ie.jsxs)(l.e,{children:[Object(Ie.jsx)(l.c,{path:"/",element:Object(Ie.jsx)(et,{})}),Object(Ie.jsx)(l.c,{path:"/details/:wineId",element:Object(Ie.jsx)(Rt,{})}),Object(Ie.jsx)(l.c,{path:"/contacts",element:Object(Ie.jsx)(et,{})}),Object(Ie.jsx)(l.c,{path:"/about",element:Object(Ie.jsx)(et,{})}),Object(Ie.jsx)(l.c,{path:"/catalogue",element:Object(Ie.jsx)(Be,{})}),Object(Ie.jsxs)(l.c,{path:"/auth",element:Object(Ie.jsx)(rt,{}),children:[Object(Ie.jsx)(l.c,{path:"login",element:Object(Ie.jsx)(ut,{})}),Object(Ie.jsx)(l.c,{path:"register",element:Object(Ie.jsx)(dt,{})}),Object(Ie.jsx)(l.c,{path:"logout",element:Object(Ie.jsx)(bt,{})})]}),Object(Ie.jsxs)(l.c,{path:"/user",element:Object(Ie.jsx)(ht,{}),children:[Object(Ie.jsx)(l.c,{path:"profile",element:Object(Ie.jsx)(wt,{})}),Object(Ie.jsx)(l.c,{path:"favorites",element:Object(Ie.jsx)(St,{})})]}),Object(Ie.jsxs)(l.c,{path:"/cart",element:Object(Ie.jsx)(pt,{}),children:[Object(Ie.jsx)(l.c,{path:"",element:Object(Ie.jsx)(Ct,{})}),Object(Ie.jsx)(l.c,{path:"checkout",element:Object(Ie.jsx)(Pt,{})})]}),Object(Ie.jsxs)(l.c,{path:"/admin",element:Object(Ie.jsx)(Yt,{}),children:[Object(Ie.jsx)(l.c,{path:"dashboard",element:Object(Ie.jsx)(Gt,{})}),Object(Ie.jsx)(l.c,{path:"create",element:Object(Ie.jsx)(Ut,{})}),Object(Ie.jsx)(l.c,{path:"edit/:wineId",element:Object(Ie.jsx)(Bt,{})})]}),Object(Ie.jsx)(l.c,{path:"/order/:orderId",element:Object(Ie.jsx)(Ht,{})}),Object(Ie.jsx)(l.c,{path:"/error",element:Object(Ie.jsx)(Vt,{})}),Object(Ie.jsx)(l.c,{path:"*",element:Object(Ie.jsx)(l.a,{to:"/"})})]}),Object(Ie.jsx)(i.a,{style:{marginTop:"6em"}})]}),Object(Ie.jsx)(tt,{}),Object(Ie.jsx)(Et,{})]})},zt=Object(ue.a)({reducer:{user:ve,cart:_e}});s.a.render(Object(Ie.jsx)(H.a,{store:zt,children:Object(Ie.jsx)(n.a.StrictMode,{children:Object(Ie.jsx)(Te.a,{children:Object(Ie.jsx)(It,{children:Object(Ie.jsx)(Jt,{})})})})}),document.getElementById("root"))},56:function(e,t,r){},93:function(e,t,r){},94:function(e,t,r){},97:function(e,t,r){},98:function(e,t,r){}},[[225,1,2]]]);
//# sourceMappingURL=main.2d91f757.chunk.js.map